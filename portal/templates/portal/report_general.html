{% extends 'base.html' %}
{% block title %}Relatórios{% endblock %}
{% block class_relatorio_menu %}active{% endblock %}


{% block breadcrumb_base %}
    <ol class="breadcrumb blue-grey lighten-4" id="breadcrumb">
        <li class="breadcrumb-item"><a href="{% url 'home' %}">Início</a></li>
        <li class="breadcrumb-item active">Relatório Geral</li>
    </ol>
{% endblock %}

{% block content %}


    <div class="row mb-4">
        <div class="col-sm-3">
            <div class="card redonda">
                <div class="card-header redonda btn-primary white-text">
                    ADMINISTRATIVO
                </div>
                <div class="card-body">
                    <div class="form-row">
                        <div class="col">
                            <button data-toggle="modal" href="#ModalDadosBancarios"
                                    class="btn btn-rounded btn-primary btn-block mb-2">
                                <i class="fa fa-dollar"></i> Financeiro
                            </button>

                            <button data-toggle="modal" href="#ModalListaAlunos"
                                    class="btn btn-rounded btn-primary btn-block mb-2">
                                <i class="fa fa-users"></i> Lista de alunos
                            </button>
                            {% if request.user.is_staff or request.user.is_superuser %}
                                <button data-toggle="modal" href="#ModalMatriculaAluno"
                                        class="btn btn-rounded btn-primary btn-block">
                                    <i class="fa fa-graduation-cap"></i> Matrícula
                                </button>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>

            <hr class="w-100 clearfix d-md-none">

        </div>
        <div class="col-sm-3">
            <div class="card redonda">
                <div class="card-header redonda btn-warning white-text">
                    AUTORIZAÇÕES DE SAÍDAS
                </div>
                <div class="card-body">
                    <div class="form-row">
                        <div class="col">
                            <button data-toggle="modal" href="#ModalRegistrarAutorizacaoSaidaAluno"
                                    class="btn btn-rounded btn-warning btn-block mb-2">
                                <i class="fa fa-user"></i> Aluno
                            </button>

                            <button data-toggle="modal" href="#ModalRegistrarAutorizacaoSaidaCurso"
                                    class="btn btn-rounded btn-warning btn-block mb-2">
                                <i class="fa fa-industry"></i> Curso
                            </button>

                            <button data-toggle="modal" href="#ModalRegistrarAutorizacaoSaidaTurma"
                                    class="btn btn-rounded btn-warning btn-block">
                                <i class="fa fa-graduation-cap"></i> Turma
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <hr class="w-100 clearfix d-md-none">

        <div class="col-sm-3">
            <div class="card redonda">
                <div class="card-header redonda primary-color-dark white-text">
                    ENCAMINHAMENTOS
                </div>
                <div class="card-body">
                    <div class="form-row">
                        <div class="col-sm-12">
                            <button data-toggle="modal" href="#ModalRegistrarEncaminhamentoAluno"
                                    class="btn btn-rounded primary-color-dark btn-block mb-2">
                                <i class="fa fa-user"></i> Aluno
                            </button>

                            <button data-toggle="modal" href="#ModalRegistrarEncaminhamentoCurso"
                                    class="btn btn-rounded primary-color-dark btn-block mb-2">
                                <i class="fa fa-industry"></i> Curso
                            </button>

                            <button data-toggle="modal" href="#ModalRegistrarEncaminhamentoTurma"
                                    class="btn btn-rounded primary-color-dark btn-block">
                                <i class="fa fa-graduation-cap"></i> Turma
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <hr class="w-100 clearfix d-md-none">

        <div class="col-sm-3">
            <div class="card redonda">
                <div class="card-header redonda ifro-color white-text">
                    OCORRÊNCIAS
                </div>
                <div class="card-body">
                    <div class="form-row">
                        <div class="col">
                            <button data-toggle="modal" href="#ModalRegistrarOcorrenciaAluno"
                                    class="btn btn-rounded ifro-color btn-block mb-2">
                                <i class="fa fa-user"></i> Aluno
                            </button>

                            <button data-toggle="modal" href="#ModalRegistrarOcorrenciaCurso"
                                    class="btn btn-rounded ifro-color btn-block mb-2">
                                <i class="fa fa-industry"></i> Curso
                            </button>

                            <button data-toggle="modal" href="#ModalRegistrarOcorrenciaTurma"
                                    class="btn btn-rounded ifro-color btn-block">
                                <i class="fa fa-graduation-cap"></i> Turma
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block modal %}
    <!--Modal ALUNO OCORRÊNCIA-->
    <div class="modal fade" id="ModalRegistrarOcorrenciaAluno" tabindex="-1" role="dialog"
         aria-labelledby="myModalLabel"
         aria-hidden="true">
        <div class="modal-dialog modal-notify modal-success" role="document">
            <!--Content-->
            <div class="modal-content">
                <!--Header-->
                <div class="modal-header text-center">
                    <h4 class="modal-title white-text w-100 font-bold py-2">Ocorrências por aluno</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true" class="white-text">&times;</span>
                    </button>
                </div>
                <form action="{% url 'ocorrencia_relatorio_aluno' %}" method="POST">
                    <!--Body-->
                    <div class="modal-body">
                        {% csrf_token %}
                        <select name="SelectAlunoOcorrencia" id="SelectAlunoOcorrencia"
                                class="mdb-select md-form colorful-select dropdown-success"
                                searchable="Pesquisar..." required>
                            <option value="" disabled selected>Selecione o Aluno</option>
                            {% for a in alunos %}
                                <option value={{ a.id }}>{{ a.nome }}</option>
                            {% endfor %}
                        </select>
                        <label for="SelectAlunoOcorrencia">Lista de alunos</label>
                    </div>
                    <!--Footer-->
                    <div class="modal-footer justify-content-center">
                        <button type="submit" class="btn btn-rounded btn-success waves-effect">Enviar</button>
                        <a type="button" class="btn btn-rounded btn-outline-success"
                           data-dismiss="modal">Voltar</a>
                    </div>
                </form>
            </div>
            <!--/.Content-->
        </div>
    </div>

    <!--Modal CURSO OCORRÊNCIA-->
    <div class="modal fade" id="ModalRegistrarOcorrenciaCurso" tabindex="-1" role="dialog"
         aria-labelledby="myModalLabel"
         aria-hidden="true">
        <div class="modal-dialog modal-notify modal-success" role="document">
            <!--Content-->
            <div class="modal-content">
                <!--Header-->
                <div class="modal-header text-center">
                    <h4 class="modal-title white-text w-100 font-bold py-2">Ocorrências por Curso</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true" class="white-text">&times;</span>
                    </button>
                </div>
                <form action="{% url 'report_ocorrencia_curso' %}" method="POST">
                    <!--Body-->
                    <div class="modal-body">
                        {% csrf_token %}
                        <select name="SelectCursoOcorrencia" id="SelectCursoOcorrencia"
                                class="mdb-select md-form colorful-select dropdown-success"
                                searchable="Pesquisar..." required>
                            <option value="" disabled selected>Selecione o curso</option>
                            {% for c in cursos %}
                                <option value={{ c.id }}>{{ c.descricao }}</option>
                            {% endfor %}
                        </select>
                        <label for="SelectCursoOcorrencia">Curso</label>
                    </div>
                    <!--Footer-->
                    <div class="modal-footer justify-content-center">
                        <button type="submit" class="btn btn-rounded btn-success waves-effect">Enviar</button>
                        <a type="button" class="btn btn-rounded btn-outline-success"
                           data-dismiss="modal">Voltar</a>
                    </div>
                </form>
            </div>
            <!--/.Content-->
        </div>
    </div>

    <!--Modal TURMA OCORRÊNCIA-->
    <div class="modal fade" id="ModalRegistrarOcorrenciaTurma" tabindex="-1" role="dialog"
         aria-labelledby="myModalLabel"
         aria-hidden="true">
        <div class="modal-dialog modal-notify modal-success" role="document">
            <!--Content-->
            <div class="modal-content">
                <!--Header-->
                <div class="modal-header text-center">
                    <h4 class="modal-title white-text w-100 font-bold py-2">Ocorrências por Turma</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true" class="white-text">&times;</span>
                    </button>
                </div>
                <form action="{% url 'report_ocorrencia_turma' %}" method="POST">
                    <!--Body-->
                    <div class="modal-body">
                        {% csrf_token %}
                        <select name="SelectTurmaOcorrencia" id="SelectTurmaOcorrencia"
                                class="mdb-select md-form colorful-select dropdown-success"
                                searchable="Pesquisar..." required>
                            <option value="" disabled selected>Selecione a turma</option>
                            {% for c in cursos %}
                                {% if c.retorna_turmas %}
                                    <optgroup label="{{ c.descricao }}">
                                        {% for t in c.retorna_turmas %}
                                            <option value={{ t.id }}>{{ t.descricao }}</option>
                                        {% endfor %}
                                    </optgroup>
                                {% endif %}
                            {% endfor %}
                        </select>
                        <label for="SelectTurmaOcorrencia">Turma</label>
                    </div>
                    <!--Footer-->
                    <div class="modal-footer justify-content-center">
                        <button type="submit" class="btn btn-rounded btn-success waves-effect">Enviar</button>
                        <a type="button" class="btn btn-rounded btn-outline-success "
                           data-dismiss="modal">Voltar</a>
                    </div>
                </form>
            </div>
            <!--/.Content-->
        </div>
    </div>

    <!--Modal ALUNO ENCAMINHAMENTO-->
    <div class="modal fade" id="ModalRegistrarEncaminhamentoAluno" tabindex="-1" role="dialog"
         aria-labelledby="myModalLabel"
         aria-hidden="true">
        <div class="modal-dialog modal-notify modal-info" role="document">
            <!--Content-->
            <div class="modal-content">
                <!--Header-->
                <div class="modal-header text-center">
                    <h4 class="modal-title white-text w-100 font-bold py-2">Encaminhamentos por Aluno</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true" class="white-text">&times;</span>
                    </button>
                </div>
                <form action="{% url 'encaminhamento_relatorio_aluno' %}" method="POST">
                    <!--Body-->
                    <div class="modal-body">
                        {% csrf_token %}
                        <select name="SelectAlunoEncaminhamento" id="SelectAlunoEncaminhamento"
                                class="mdb-select md-form colorful-select dropdown-success"
                                searchable="Pesquisar..." required>
                            <option value="" disabled selected>Selecione o aluno</option>
                            {% for a in alunos %}
                                <option value={{ a.id }}>{{ a.nome }}</option>
                            {% endfor %}
                        </select>
                        <label for="SelectAlunoEncaminhamento">Lista de alunos</label>
                    </div>  <!--Footer-->
                    <div class="modal-footer justify-content-center">
                        <button type="submit" class="btn btn-rounded btn-primary waves-effect">Enviar</button>
                        <a type="button" class="btn btn-rounded btn-outline-primary"
                           data-dismiss="modal">Voltar</a>
                    </div>
                </form>
            </div>
            <!--/.Content-->
        </div>
    </div>
    <!--Modal CURSO ENCAMINHAMENTO-->
    <div class="modal fade" id="ModalRegistrarEncaminhamentoCurso" tabindex="-1" role="dialog"
         aria-labelledby="myModalLabel"
         aria-hidden="true">
        <div class="modal-dialog modal-notify modal-info" role="document">
            <!--Content-->
            <div class="modal-content">
                <!--Header-->
                <div class="modal-header text-center">
                    <h4 class="modal-title white-text w-100 font-bold py-2">Encaminhamentos por Curso</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true" class="white-text">&times;</span>
                    </button>
                </div>
                <form action="{% url 'report_encaminhamento_curso' %}" method="POST">
                    <!--Body-->
                    <div class="modal-body">
                        {% csrf_token %}
                        <select name="SelectCursoEncaminhamento" id="SelectCursoEncaminhamento"
                                class="mdb-select md-form colorful-select dropdown-success"
                                searchable="Pesquisar..." required>
                            <option value="" disabled selected>Selecione o curso</option>
                            {% for c in cursos %}
                                <option value={{ c.id }}>{{ c.descricao }}</option>
                            {% endfor %}
                        </select>
                        <label for="SelectCursoEncaminhamento">Curso</label>
                    </div>
                    <!--Footer-->
                    <div class="modal-footer justify-content-center">
                        <button type="submit" class="btn btn-rounded btn-primary waves-effect">Enviar</button>
                        <a type="button" class="btn btn-rounded btn-outline-primary"
                           data-dismiss="modal">Voltar</a>
                    </div>
                </form>
            </div>
            <!--/.Content-->
        </div>
    </div>
    <!--Modal TURMA ENCAMINHAMENTO-->
    <div class="modal fade" id="ModalRegistrarEncaminhamentoTurma" tabindex="-1" role="dialog"
         aria-labelledby="myModalLabel"
         aria-hidden="true">
        <div class="modal-dialog modal-notify modal-info" role="document">
            <!--Content-->
            <div class="modal-content">
                <!--Header-->
                <div class="modal-header text-center">
                    <h4 class="modal-title white-text w-100 font-bold py-2">Encaminhamentos por Turma</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true" class="white-text">&times;</span>
                    </button>
                </div>
                <form action="{% url 'report_encaminhamento_turma' %}" method="POST">
                    <!--Body-->
                    <div class="modal-body">
                        {% csrf_token %}
                        <select name="SelectTurmaEncaminhamento" id="SelectTurmaEncaminhamento"
                                class="mdb-select md-form colorful-select dropdown-success"
                                searchable="Pesquisar..." required>
                            <option value="" disabled selected>Selecione a turma</option>
                            {% for c in cursos %}
                                {% if c.retorna_turmas %}
                                    <optgroup label="{{ c.descricao }}">
                                        {% for t in c.retorna_turmas %}
                                            <option value={{ t.id }}>{{ t.descricao }}</option>
                                        {% endfor %}
                                    </optgroup>
                                {% endif %}
                            {% endfor %}
                        </select>
                        <label for="SelectTurmaEncaminhamento">Turma</label>
                    </div>
                    <!--Footer-->
                    <div class="modal-footer justify-content-center">
                        <button type="submit" class="btn btn-rounded btn-primary waves-effect">Enviar</button>
                        <a type="button" class="btn btn-rounded btn-outline-primary"
                           data-dismiss="modal">Voltar</a>
                    </div>
                </form>
            </div>
            <!--/.Content-->
        </div>
    </div>



    <!--Modal CURSO AUTORIZAÇÃO SAÍDA-->
    <div class="modal fade" id="ModalRegistrarAutorizacaoSaidaCurso" tabindex="-1" role="dialog"
         aria-labelledby="myModalLabel"
         aria-hidden="true">
        <div class="modal-dialog modal-notify modal-warning" role="document">
            <!--Content-->
            <div class="modal-content">
                <!--Header-->
                <div class="modal-header text-center">
                    <h4 class="modal-title white-text w-100 font-bold py-2">Autorizações de saída por Curso</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true" class="white-text">&times;</span>
                    </button>
                </div>
                <form action="{% url 'report_autorizacao_saida_curso' %}" method="POST">
                    <!--Body-->
                    <div class="modal-body">
                        {% csrf_token %}
                        <select name="SelectCursoAutorizacaoSaida" id="SelectCursoAutorizacaoSaida"
                                class="mdb-select md-form colorful-select dropdown-success"
                                searchable="Pesquisar..." required>
                            <option value="" disabled selected>Selecione o curso</option>
                            {% for c in cursos %}
                                <option value={{ c.id }}>{{ c.descricao }}</option>
                            {% endfor %}
                        </select>
                        <label for="SelectCursoAutorizacaoSaida">Curso</label>
                    </div>
                    <!--Footer-->
                    <div class="modal-footer justify-content-center">
                        <button type="submit" class="btn btn-rounded btn-warning waves-effect">Enviar</button>
                        <a type="button" class="btn btn-rounded btn-outline-warning"
                           data-dismiss="modal">Voltar</a>
                    </div>
                </form>
            </div>
            <!--/.Content-->
        </div>
    </div>

    <!--Modal TURMA AUTORIZAÇÃO DE SAÍDA-->
    <div class="modal fade" id="ModalRegistrarAutorizacaoSaidaTurma" tabindex="-1" role="dialog"
         aria-labelledby="myModalLabel"
         aria-hidden="true">
        <div class="modal-dialog modal-notify modal-warning" role="document">
            <!--Content-->
            <div class="modal-content">
                <!--Header-->
                <div class="modal-header text-center">
                    <h4 class="modal-title white-text w-100 font-bold py-2">Autorizações de saída por Turma</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true" class="white-text">&times;</span>
                    </button>
                </div>
                <form action="{% url 'report_autorizacao_saida_turma' %}" method="POST">
                    <!--Body-->
                    <div class="modal-body">
                        {% csrf_token %}
                        <select name="SelectTurmaAutorizacaoSaida" id="SelectTurmaAutorizacaoSaida"
                                class="mdb-select md-form colorful-select dropdown-success"
                                searchable="Pesquisar..." required>
                            <option value="" disabled selected>Selecione a turma</option>
                            {% for c in cursos %}
                                {% if c.retorna_turmas %}
                                    <optgroup label="{{ c.descricao }}">
                                        {% for t in c.retorna_turmas %}
                                            <option value={{ t.id }}>{{ t.descricao }}</option>
                                        {% endfor %}
                                    </optgroup>
                                {% endif %}
                            {% endfor %}
                        </select>
                        <label for="SelectTurmaAutorizacaoSaida">Turma</label>
                    </div>
                    <!--Footer-->
                    <div class="modal-footer justify-content-center">
                        <button type="submit" class="btn btn-rounded btn-warning waves-effect">Enviar</button>
                        <a type="button" class="btn btn-rounded btn-outline-warning"
                           data-dismiss="modal">Voltar</a>
                    </div>
                </form>
            </div>
            <!--/.Content-->
        </div>
    </div>

    <!-- MODAL DADOS BANCÁRIOS -->
    <div class="modal fade" id="ModalDadosBancarios" tabindex="-1" role="dialog"
         aria-labelledby="myModalLabel"
         aria-hidden="true">
        <div class="modal-dialog modal-notify modal-info" role="document">
            <!--Content-->
            <div class="modal-content">
                <!--Header-->
                <div class="modal-header text-center">
                    <h4 class="modal-title white-text w-100 font-bold py-2">Dados bancários por turma</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true" class="white-text">&times;</span>
                    </button>
                </div>
                <form action="{% url 'report_pdf_dados_bancarios' %}" method="POST">
                    <!--Body-->
                    <div class="modal-body">
                        {% csrf_token %}
                        <select name="SelectTurmaDadosBancarios" id="SelectTurmaDadosBancarios"
                                class="mdb-select md-form colorful-select dropdown-success"
                                searchable="Pesquisar..." required>
                            <option value="" disabled selected>Selecione a turma</option>
                            {% for c in cursos %}
                                {% if c.retorna_turmas %}
                                    <optgroup label="{{ c.descricao }}">
                                        {% for t in c.retorna_turmas %}
                                            <option value={{ t.id }}>{{ t.descricao }}</option>
                                        {% endfor %}
                                    </optgroup>
                                {% endif %}
                            {% endfor %}
                        </select>
                        <label for="SelectTurmaDadosBancarios">Turma</label>
                    </div>
                    <!--Footer-->
                    <div class="modal-footer justify-content-center">
                        <button type="submit" class="btn btn-rounded btn-info waves-effect">Enviar</button>
                        <a type="button" class="btn btn-rounded btn-outline-info"
                           data-dismiss="modal">Voltar</a>
                    </div>
                </form>
            </div>
            <!--/.Content-->
        </div>
    </div>
    <!-- FIM MODAL DADOS BANCÁRIOS -->

    <!-- MODAL LISTA ALUNOS -->
    <div class="modal fade" id="ModalListaAlunos" tabindex="-1" role="dialog"
         aria-labelledby="myModalLabel"
         aria-hidden="true">
        <div class="modal-dialog modal-notify modal-info" role="document">
            <!--Content-->
            <div class="modal-content">
                <!--Header-->
                <div class="modal-header text-center">
                    <h4 class="modal-title white-text w-100 font-bold py-2">Lista de alunos por turma</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true" class="white-text">&times;</span>
                    </button>
                </div>
                <form action="{% url 'report_pdf_lista_aluno_turma' %}" method="POST">
                    <!--Body-->
                    <div class="modal-body">
                        {% csrf_token %}
                        <select name="SelectListaAlunosTurma" id="SelectListaAlunosTurma"
                                class="mdb-select md-form colorful-select dropdown-success"
                                searchable="Pesquisar..." required>
                            <option value="" disabled selected>Selecione a turma</option>
                            {% for c in cursos %}
                                {% if c.retorna_turmas %}
                                    <optgroup label="{{ c.descricao }}">
                                        {% for t in c.retorna_turmas %}
                                            <option value={{ t.id }}>{{ t.descricao }}</option>
                                        {% endfor %}
                                    </optgroup>
                                {% endif %}
                            {% endfor %}
                        </select>
                        <label for="SelectListaAlunosTurma">Turma</label>
                    </div>
                    <!--Footer-->
                    <div class="modal-footer justify-content-center">
                        <button type="submit" class="btn btn-rounded btn-info waves-effect">Enviar</button>
                        <a type="button" class="btn btn-rounded btn-outline-info"
                           data-dismiss="modal">Voltar</a>
                    </div>
                </form>
            </div>
            <!--/.Content-->
        </div>
    </div>
    <!-- FIM MODAL LISTA ALUNOS -->

    <!-- MODAL DECLARAÇÃO MATRÍCULA ALUNO -->
    <div class="modal fade" id="ModalMatriculaAluno" tabindex="-1" role="dialog"
         aria-labelledby="myModalLabel"
         aria-hidden="true">
        <div class="modal-dialog modal-notify modal-info" role="document">
            <!--Content-->
            <div class="modal-content">
                <!--Header-->
                <div class="modal-header text-center">
                    <h4 class="modal-title white-text w-100 font-bold py-2">Declaração de matrícula</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true" class="white-text">&times;</span>
                    </button>
                </div>
                <form action="{% url 'report_pdf_declaracao_matricula' %}" target="_blank" method="POST">
                    <!--Body-->
                    <div class="modal-body">
                        {% csrf_token %}
                        <select name="SelectDeclaraoMatriculaAluno" id="SelectDeclaraoMatriculaAluno"
                                class="mdb-select md-form colorful-select dropdown-success"
                                searchable="Pesquisar..." required>
                            <option value="" disabled selected>Selecione o aluno</option>
                            {% for a in alunos %}
                                <option value={{ a.id }}>{{ a.nome }}</option>
                            {% endfor %}
                        </select>
                        <label for="SelectDeclaraoMatriculaAluno">Lista de alunos</label>
                    </div>
                    <!--Footer-->
                    <div class="modal-footer justify-content-center">
                        <button type="submit" class="btn btn-rounded btn-info waves-effect"
                                onclick="$('#ModalMatriculaAluno').modal('hide')">Enviar
                        </button>
                        <a type="button" class="btn btn-rounded btn-outline-info"
                           data-dismiss="modal">Voltar</a>
                    </div>
                </form>
            </div>
            <!--/.Content-->
        </div>
    </div>
    <!-- FIM MODAL DECLARAÇÃO MATRÍCULA ALUNO -->
{% endblock %}